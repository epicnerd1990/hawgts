{
  "preset_info": {
    "version": 13,
    "title": "Device Control Widget 0.3.4a Alpha",
    "description": "My Home Device Widget",
    "author": "Corey Welsh",
    "email": "coreyw2000@gmail.com",
    "width": 1080,
    "height": 314,
    "features": "",
    "release": 374323018,
    "locked": false,
    "pflags": 0
  },
  "preset_root": {
    "internal_type": "RootLayerModule",
    "internal_toggles": {
      "config_scale_value": 10
    },
    "internal_formulas": {
      "config_scale_value": "100"
    },
    "globals_list": {
      "readme": {
        "index": 1,
        "type": "LIST",
        "title": "README",
        "entries": "\"Hey there! To setup this widget correctly, you'll need to install Tasker. Please read the setup instructions at my GitHub here:\n<URL>\n\nHighlights of this widget are a OneUI based interface thats full customizable down to margins and corner radius. Features includes:\n- Modify icon sizes, padding and spacing to get the look you want\n- Automatic resizing and adjusting of layout, with further manual adjustments\n- \"setup\" mode which allows you to view all the data for spacing and icons you need\nAnd many more!\n\nCreated by Corey Welsh to fill the need of an easy-setup Home Assistant widget also looks great\"",
        "value": "Hey there! To setup this widget correctly, you'll need to install Tasker. Please read the setup instructions at my GitHub here:\n<URL>\n\nHighlights of this widget are a OneUI based interface thats full customizable down to margins and corner radius. Features includes:\n- Modify icon sizes, padding and spacing to get the look you want\n- Automatic resizing and adjusting of layout, with further manual adjustments\n- setup mode which allows you to view all the data for spacing and icons you need\nAnd many more!\n\nCreated by Corey Welsh to fill the need of an easy-setup Home Assistant widget also looks great"
      },
      "- 1.": {
        "index": 2,
        "type": "LIST",
        "title": "-- 1",
        "entries": "-- Color Options --\nClick to read color editing options\n\nTo edit the filters put onto the color, look for the dark or light color calculations in the flows tab. Follow the guide on github for color edits",
        "value": "-- Color Options --"
      },
      "colors": {
        "index": 3,
        "type": "FOLDER",
        "title": "colors",
        "description": "-- Color Options --"
      },
      "colors/col1sel": {
        "index": 4,
        "type": "LIST",
        "title": "col1sel",
        "description": "Color 1 - Choose the color source for the smaller box background. If you dont use the color picker, set a color you like, and it will be used as a fallback",
        "entries": "0##Wallpaper #1, 1##Wallpaper #2, 2##System (MaterialYou), 3##Manual (Color picker)",
        "value": "0"
      },
      "colors/col1sysc": {
        "index": 5,
        "type": "LIST",
        "title": "col1sysc",
        "description": "Color 1 - System/MaterialYou Only\nChoose a color tone.",
        "entries": "0##Accent #1, 1##Accent #2, 2##Accent #3, 3##Neutral #1, 4##Neutral #2, 5##Neutral #3",
        "value": "2"
      },
      "colors/col1fil1": {
        "index": 6,
        "type": "LIST",
        "title": "col1fil1",
        "description": "Color 1 - Wallpaper Only\nChoose filter.",
        "entries": "0##None, 1##Saturation, 2##Brightness, 3##Complimentary Color",
        "value": "2"
      },
      "colors/col1adj": {
        "index": 7,
        "type": "NUMBER",
        "title": "col1adj",
        "description": "Color 1 - Filter adjustment\n0 = None, 100 = Strong",
        "min": 0,
        "max": 100,
        "value": 40.0
      },
      "colors/col1fil2": {
        "index": 8,
        "type": "LIST",
        "title": "col1fil2",
        "description": "Color 1 - Choose filter manipulation - Changes slider above from total into add/subtract from current (optional)",
        "entries": "0##None, 1##Add, 2##Remove",
        "value": "0"
      },
      "colors/col1pick": {
        "index": 9,
        "type": "COLOR",
        "title": "col1pick",
        "description": "Color 1 - Manual Color choice, overrides filter\nAlso used as fallback color for extracted colors",
        "value": "#FFFFFFFF"
      },
      "colors/col1alph": {
        "index": 10,
        "type": "NUMBER",
        "title": "col1alph",
        "description": "Color 1 - Opacity Adjustment\n0 = Transparent, 255 = Solid",
        "min": 0,
        "max": 100,
        "value": 75.0
      },
      "colors/col2sel": {
        "index": 11,
        "type": "LIST",
        "title": "col2sel",
        "description": "Color 2 - Choose the color source for the larger box background. If you dont use the color picker, set a color you like, and it will be used as a fallback",
        "entries": "0##Wallpaper #1, 1##Wallpaper #2, 2##System (MaterialYou), 3##Manual (Color picker)",
        "value": "0"
      },
      "colors/col2sysc": {
        "index": 12,
        "type": "LIST",
        "title": "col2sysc",
        "description": "Color 2 - System/MaterialYou Only\nChoose a color tone",
        "entries": "0##Accent #1, 1##Accent #2, 2##Accent #3, 3##Neutral #1, 4##Neutral #2, 5##Shade Level",
        "value": "0"
      },
      "colors/col2fil1": {
        "index": 13,
        "type": "LIST",
        "title": "col2fil1",
        "description": "Color 2 - Wallpaper Only\nChoose filter.",
        "entries": "0##None, 1##Saturation, 2##Brightness, 3##Complimentary Color",
        "value": "2"
      },
      "colors/col2adj": {
        "index": 14,
        "type": "NUMBER",
        "title": "col2adj",
        "description": "Color 2 - Filter adjustment\n0 = None, 100 = Strong",
        "min": 0,
        "max": 100,
        "value": 55.0
      },
      "colors/col2fil2": {
        "index": 15,
        "type": "LIST",
        "title": "col2fil2",
        "description": "Color 2 - Choose filter manipulation - Changes number above from total into add/subtract from current (optional)",
        "entries": "0##None, 1##Add, 2##Remove",
        "value": "0"
      },
      "colors/col2pick": {
        "index": 16,
        "type": "COLOR",
        "title": "col2pick",
        "description": "Color 2 - Manual Color choice, overrides filter.\nAlso used as fallback color for extracted colors",
        "value": "#E7FFFFFF"
      },
      "colors/col2alph": {
        "index": 17,
        "type": "NUMBER",
        "title": "col2alph",
        "description": "Color 2 - Opacity Adjustment\n0 = Transparent, 255 = Solid",
        "min": 0,
        "max": 100,
        "value": 75.0
      },
      "colors/colico": {
        "index": 18,
        "type": "COLOR",
        "title": "colico",
        "description": "Color of icons and text. Default: #E7FFFFFF",
        "value": "#E7FFFFFF"
      },
      "- 2.": {
        "index": 19,
        "type": "LIST",
        "title": "- 2.",
        "entries": "-- Widget Sizing and Alignment --",
        "value": "-- Widget Sizing and Alignment --"
      },
      "wgtboxsw": {
        "index": 21,
        "type": "LIST",
        "title": "wgtboxsw",
        "description": "Swap the large and small boxes on your Widget",
        "entries": "0##Normal Layout, 1##Inverted Layout",
        "value": "1"
      },
      "wgtmode": {
        "index": 20,
        "type": "LIST",
        "title": "wgtmode",
        "description": "Choose Widget box scaling. Match to what your current preset requires",
        "entries": "0##4 Main Icons, 1##2 Main Icons",
        "value": "0"
      },
      "smboxper": {
        "index": 22,
        "type": "LIST",
        "title": "smboxper",
        "description": "Choose how many icons you want shown in the smaller box. If using single room controls, choose 2. Default: 4",
        "entries": "15##2 Main Icons, 30##4 Main Icons",
        "value": "30"
      },
      "corrad": {
        "index": 23,
        "type": "NUMBER",
        "title": "corrad",
        "description": "Set the radius of the rounded corners.\nDefault: 10kpx",
        "min": 0,
        "max": 50,
        "value": 10.0
      },
      "- 3.": {
        "index": 24,
        "type": "LIST",
        "title": "- 3.",
        "entries": "-- Icon Sizing and Alignment --",
        "value": "-- Icon Sizing and Alignment --"
      },
      "icomain": {
        "index": 25,
        "type": "NUMBER",
        "title": "icomain",
        "description": "Set the size of the main icons.\nDefault: 80kpx",
        "min": 20,
        "max": 120,
        "value": 80.0
      },
      "icosm": {
        "index": 26,
        "type": "NUMBER",
        "title": "icosm",
        "description": "Set the size of the small icon(s).\nDefault: 32kpx",
        "min": 20,
        "max": 75,
        "value": 32.0
      },
      "icodev": {
        "index": 27,
        "type": "NUMBER",
        "title": "icodev",
        "description": "Set the full size of the device icon.\nDefault: 120kpx",
        "min": 0,
        "max": 120,
        "value": 120.0
      },
      "icodevsm": {
        "index": 28,
        "type": "LIST",
        "title": "icodevsm",
        "description": "CHANGE TO icodevsc - Control the size of the device icon.\nDefault: Auto-adjust",
        "entries": "0##Normal Device icon size, 1##Match small icons, 2## Auto-shrink for smaller widget",
        "value": "2"
      },
      "- 4.": {
        "index": 29,
        "type": "LIST",
        "title": "- 4.",
        "entries": "-- Padding and Spacing --",
        "value": "-- Padding and Spacing --"
      },
      "icomarg": {
        "index": 30,
        "type": "NUMBER",
        "title": "icomarg",
        "description": "Set the margin between the edge of widget and the icons.\nDefault: 10kpx",
        "min": 0,
        "max": 200,
        "value": 10.0
      },
      "icopad": {
        "index": 31,
        "type": "NUMBER",
        "title": "icopad",
        "description": "Set the padding between icons in a row.\nDefault: 20kpx",
        "min": 0,
        "max": 50,
        "value": 20.0
      },
      "padside": {
        "index": 32,
        "type": "NUMBER",
        "title": "padside",
        "description": "Set the padding from the edge of screen to the side of widget.\nDefault: 15kpx",
        "value": 15.0,
        "min": 0,
        "max": 50
      },
      "padupdwn": {
        "index": 33,
        "type": "NUMBER",
        "title": "padupdwn",
        "description": "Set the padding from the edge of screen to the top/bottom of widget. Will double when two widgets are stacked. Default: 4kpx",
        "value": 4,
        "min": 0,
        "max": 50
      },
      "icohide": {
        "index": 34,
        "type": "SWITCH",
        "title": "icohide",
        "description": "Hide the settings icons.\nOff = Show settings, On = Hide settings",
        "value": 0
      },
      "- 5.": {
        "index": 35,
        "type": "LIST",
        "title": "- 5.",
        "entries": "-- Advanced Options (may break things) --",
        "value": "-- Advanced Options (may break things) --"
      },
      "setupmde": {
        "index": 36,
        "type": "SWITCH",
        "title": "setupmde",
        "description": "ADVANCED: Enable showing setup data. This will give you numbers and information for fine-tuning the widget to fit your device screen",
        "value": 0
      },
      "icopadr": {
        "index": 37,
        "type": "SWITCH",
        "title": "icopadr",
        "description": "ADVANCED: Remove icon padding for settings while leaving icons. You may need to adjust icon size to prevent overlapping. Default: Off",
        "value": "0"
      },
      "autoalig": {
        "index": 38,
        "type": "SWITCH",
        "title": "autoalig",
        "description": "ADVANCED - Manually set layout direction of widget. Use with next 2 options to configure",
        "value": "0"
      },
      "wgtalign": {
        "index": 39,
        "type": "SWITCH",
        "title": "wgtalign",
        "description": "ADVANCED - Auto horizontal or vertical alignment based on widget sizing",
        "on_mode": "MANUAL_FORMULA",
        "on_formula": "$if(gv(autoalig) = 0, (si(rratio) < 0.8, 0))$",
        "off_mode": "MANUAL_FORMULA",
        "off_formula": "$if(gv(autoalig) = 0, (si(rratio) > 0.8, 0))$",
        "value": 1
      },
      "position": {
        "index": 40,
        "type": "LIST",
        "title": "position",
        "description": "ADVANCED - Change the alignment of the smaller box. Use with two previous settings",
        "entries": "LEFT##Left - Horizontal Layout, RIGHT##Right - Horizontal Layout, TOP##Top - Vertical Layout, BOTTOM##Bottom - Vertical Layout",
        "value": "LEFT"
      },
      "generate": {
        "index": 41,
        "type": "FOLDER",
        "title": "generate",
        "description": "Generated Globals. Editing these formula may cause unintended issues. Proceed with caution."
      },
      "generate/col1": {
        "index": 42,
        "type": "COLOR",
        "title": "col1",
        "description": "GENERATED - Background color generated from user settings for smaller box",
        "value": "$lv(col, ce(si(wpcolor1),lum,40)))$$ce(#col,alpha,75)$",
        "toggles": 10,
        "global_formula": "$lv(source, (if(gv(colors/col1sel) = 0, \"wpcolor1\", gv(colors/col1sel) = 1, \"wpcolor2\", gv(colors/col1sel) = 2, \"sys\", \"0\")))$\n$lv(filter, (if(gv(colors/col1fil1) = 1, \"sat\", gv(colors/col1fil1) = 2, \"lum\", gv(colors/col1fil1) = 3, \"comp\", \"sat\")))$\n$lv(coltone, (if(gv(colors/col1sysc) = 0, \"sysca1\", gv(colors/col1sysc) = 1, \"sysca2\", gv(colors/col1sysc) = 2, \"sysca3\", gv(colors/col1sysc) = 3, \"syscn1\", gv(colors/col1sysc) = 4, \"syscn2\", gv(colors/col1sysc) = 5, \"syscn3\", \"sysca1\")))$\n$lv(addsub, (if(gv(colors/col1fil2) = 0, \"\", gv(colors/col1fil2) = 1, \"a\", gv(colors/col1fil2) = 2, \"r\", \"\")))$\n\n$if(gv(colors/col1fil1) > 0 & (#source = \"wpcolor1\" | #source = \"wpcolor2\"), lv(col1, ce(si(#source), #filter, gv(colors/col1adj))))$\n$if(gv(colors/col1fil1) > 0 & #source = \"sys\", lv(col2, si(#coltone, gv(colors/col1adj))))$\n$if(gv(colors/col1fil1) = 0 | gv(colors/col1sel) = 3, lv(col3, gv(colors/col1pick)))$\n\n\n$lv(color, (if(gv(colors/col1sel) <= 1, #col1, gv(colors/col1sel) = 2, #col2, gv(colors/col1sel) = 3, #col3)))$\n$lv(final, ce(#color, alpha, gv(colors/col1alph)))$\n$#final$\n"
      },
      "generate/col2": {
        "index": 43,
        "type": "COLOR",
        "title": "col2",
        "description": "GENERATED - Background color generated from user settings for larger box",
        "value": "$lv(col, ce(si(wpcolor1),lum,55))$$ce(#col,alpha,75)$",
        "toggles": 10,
        "global_formula": "$lv(source, (if(gv(colors/col2sel) = 0, \"wpcolor1\", gv(colors/col2sel) = 1, \"wpcolor2\", gv(colors/col2sel) = 2, \"sys\", \"0\")))$\n$lv(filter, (if(gv(colors/col2fil1) = 1, \"sat\", gv(colors/col2fil1) = 2, \"lum\", gv(colors/col2fil1) = 3, \"comp\", \"sat\")))$\n$lv(coltone, (if(gv(colors/col2sysc) = 0, \"sysca1\", gv(colors/col2sysc) = 1, \"sysca2\", gv(colors/col2sysc) = 2, \"sysca3\", gv(colors/col2sysc) = 3, \"syscn1\", gv(colors/col2sysc) = 4, \"syscn2\", gv(colors/col2sysc) = 5, \"syscn3\", \"sysca1\")))$\n$lv(addsub, (if(gv(colors/col2fil2) = 0, \"\", gv(colors/col2fil2) = 1, \"a\", gv(colors/col2fil2) = 2, \"r\", \"\")))$\n\n$if(gv(colors/col2fil1) > 0 & (#source = \"wpcolor1\" | #source = \"wpcolor2\"), lv(col1, ce(si(#source), #filter, gv(colors/col2adj))))$\n$if(gv(colors/col2fil1) > 0 & #source = \"sys\", lv(col2, si(#coltone, gv(colors/col2adj))))$\n$if(gv(colors/col2fil1) = 0 | gv(colors/col2sel) = 3, lv(col3, gv(colors/col2pick)))$\n\n\n$lv(color, (if(gv(colors/col2sel) <= 1, #col1, gv(colors/col2sel) = 2, #col2, gv(colors/col2sel) = 3, #col3)))$\n$lv(final, ce(#color, alpha, gv(colors/col2alph)))$\n$#final$"
      },
      "generate/pagenum": {
        "index": 44,
        "type": "LIST",
        "title": "pagenum",
        "description": "GENERATED - Number of displayed page",
        "entries": "0##Room #1, 1##Room #2, 2##Room #3, 3##Room #4",
        "value": "0"
      },
      "generate/wgwidth": {
        "index": 45,
        "type": "NUMBER",
        "title": "wgwidth",
        "description": "GENERATED - Width of widget, minus padding",
        "min": 100,
        "max": 300,
        "toggles": 10,
        "global_formula": "$si(rwidth) - (gv(padside) * 2)$"
      },
      "generate/wgheight": {
        "index": 46,
        "type": "NUMBER",
        "title": "wgheight",
        "description": "GENERATED - Height of widget, minus padding",
        "value": 690,
        "min": 500,
        "max": 720,
        "toggles": 10,
        "global_formula": "$si(rheight) - (gv(padupdwn) * 2)$"
      },
      "generate/smboxw": {
        "index": 47,
        "type": "NUMBER",
        "title": "smboxw",
        "description": "GENERATED - Width of the smaller box",
        "min": 0,
        "max": 500,
        "value": 120.0,
        "toggles": 10,
        "global_formula": "$if(gv(wgtalign) = 0, (gv(smboxper) * 720 / 100), (gv(generate/wgwidth)))$"
      },
      "generate/smboxh": {
        "index": 48,
        "type": "NUMBER",
        "title": "smboxh",
        "description": "GENERATED - Height of the smaller box",
        "min": 0,
        "max": 500,
        "value": 120.0,
        "toggles": 10,
        "global_formula": "$if(gv(wgtalign) = 0, gv(generate/wgheight) (gv(smboxper) * 720 / 100))$"
      },
      "generate/lgboxw": {
        "index": 49,
        "type": "NUMBER",
        "title": "lgboxw",
        "description": "GENERATED - Width of the larger box",
        "min": 0,
        "max": 720,
        "toggles": 10,
        "global_formula": "$if(gv(wgtalign) = 0, (if(gv(generate/wgwidth) <= gv(generate/lgboxmin), gv(generate/lgboxmin), (gv(generate/wgwidth) - gv(generate/smboxw)))), gv(generate/wgwidth))$"
      },
      "generate/lgboxh": {
        "index": 50,
        "type": "NUMBER",
        "title": "lgboxh",
        "description": "GENERATED - Height of the larger box",
        "min": 0,
        "max": 720,
        "toggles": 10,
        "global_formula": "$if(gv(wgtalign) = 0, gv(generate/wgheight), (gv(generate/wgheight) - gv(generate/smboxh)))$"
      },
      "generate/icocount": {
        "index": 51,
        "type": "NUMBER",
        "title": "icocount",
        "description": "GENERATED - Number of icons visible in a row. Based on widget size and padding",
        "value": 4.0,
        "min": 0,
        "max": 10,
        "toggles": 10,
        "global_formula": "$/* Generate number of icons able to be shown\nCalculate icon sizes, padding and widget alignment */\nlv(icon, gv(icomain) + gv(icopad))$$lv(lgbox, if(gv(wgtalign) = 0, gv(generate/lgboxw), gv(generate/lgboxh)))$\n\n$/* Subtract settings icons, unless they're gone.\nGet final number: Icon size / Box - settings */\nlv(adjustment, if(gv(icopadr) = 0, gv(icosm), 0))$\n$lv(boxsize, #lgbox - #adjustment)$\n$lv(count, #boxsize / #icon)$\n$if(#count <= 2, 2, tc(cut, mu(abs,#count), 1))$"
      },
      "generate/lgboxmin": {
        "index": 52,
        "type": "TEXT",
        "title": "lgboxmin",
        "description": "GENERATED - Minimum size of device Control box. Based on icon sizes and padding",
        "toggles": 10,
        "global_formula": "$/* If padding is hidden, remove from calculation */lv(icoopt, if(gv(icopadr) = 0,  (gv(icodevge)), 0))$\n\n$/*Calculate the minimum size the large box can be (2 icons) */\n((gv(icomain) * 2) + (gv(icomarg) * 2) + gv(icopad) + #icoopt)$"
      },
      "generate/icodevge": {
        "index": 53,
        "type": "NUMBER",
        "title": "icodevge",
        "description": "GENERATED - Minimal device logo. Uses HA icon size and padding to align outside edge of icons",
        "min": 0,
        "max": 720,
        "toggles": 10,
        "global_formula": "$lv(small, gv(icomarg) + gv(icosm))$\n$lv(large, gv(icodev))$\n$lv(autoshr, (if(gv(generate/icocount) < 4 & gv(icodevsm) = 2, 1, 0)))$\n$if(#autoshr = 1 | gv(icodevsm) = 1, #small, #autoshr = 0 | gv(icodevsm) = 0, #large)$"
      },
      "tasker": {
        "index": 54,
        "type": "FOLDER",
        "title": "tasker",
        "description": "Global variables to be updated with tasker data"
      },
      "colors/colicoon": {
        "index": 55,
        "type": "COLOR",
        "title": "colicoon",
        "description": "Color of icons and text when device is on",
        "value": "#FF00DEFF",
        "toggles": 10,
        "global_formula": "$ce(si(wpcolor1, comp), sat, 60)$"
      },
      "tasker/hactrl": {
        "index": 57,
        "type": "TEXT",
        "title": "hactrl",
        "description": "GENERATED - Device control data from touch event of each button",
        "value": "light.turn_on&{ \"entity_id\": \"light.bedroom_lights\", \"brightness\": 30 } "
      }
    },
    "internal_flows": [
      {
        "id": "FeKvfGGD",
        "name": "Settings/padding Connection",
        "t": [
          {
            "id": "TT41czB9",
            "type": "T_MANUAL"
          },
          {
            "id": "TTUgbzGm",
            "type": "T_FORMULA",
            "params": {
              "formula": "$gv(icohide)$"
            }
          }
        ],
        "a": [
          {
            "id": "TAWiUheV",
            "type": "A_FORMULA",
            "params": {
              "formula": "$if(gv(icohide) = 1, 1, 0)$"
            }
          },
          {
            "id": "TAtPSETR",
            "type": "A_GLOBAL",
            "params": {
              "global": "icopadr"
            }
          }
        ]
      },
      {
        "id": "FOol7HW0",
        "name": "Auto-align when Widget resized",
        "t": [
          {
            "id": "TTQUg99e",
            "type": "T_MANUAL"
          }
        ],
        "a": [
          {
            "id": "TA9AHyH1",
            "type": "A_FORMULA",
            "params": {
              "formula": "$si(rratio)$"
            }
          },
          {
            "id": "TAfPSdvY",
            "type": "A_DELAY",
            "params": {
              "delay_unit": "5"
            }
          },
          {
            "id": "TAkJ8tql",
            "type": "A_FORMULA",
            "params": {
              "formula": "$if(gv(autoalig) = 1 & si(rratio) = #last, 0, 1)$"
            }
          },
          {
            "id": "TAzGJYUJ",
            "type": "A_GLOBAL",
            "params": {
              "global": "autoalig"
            }
          }
        ]
      },
      {
        "id": "FMbpgyDs",
        "name": "Auto-align based on resize",
        "t": [
          {
            "id": "TTMcQ0Xc",
            "type": "T_MANUAL"
          },
          {
            "id": "TTGZqmKT",
            "type": "T_FORMULA",
            "params": {
              "formula": "$gv(wgtboxsw)$"
            }
          }
        ],
        "a": [
          {
            "id": "TAKkmw2V",
            "type": "A_FORMULA",
            "params": {
              "formula": "$lv(current, gv(position))$$lv(horver, (if(gv(wgtalign) = 0, \"hor\", \"ver\")))$$lv(inverted, (if(gv(wgtboxsw) = 0, \"no\", \"yes\")))$$lv(pos, (if(#horver = \"hor\" & #inverted = \"no\", \"RIGHT\", #horver = \"hor\" & #inverted = \"yes\", \"LEFT\", #horver = \"ver\" & #inverted = \"no\", \"TOP\", #horver = \"ver\" & #inverted = \"yes\", \"BOTTOM\")))$$if(gv(autoalig) = 0, #pos, current)$"
            }
          },
          {
            "id": "TAkUFwMK",
            "type": "A_GLOBAL",
            "params": {
              "global": "position"
            }
          }
        ]
      },
      {
        "id": "FSjg0cIl",
        "name": "Invert",
        "t": [
          {
            "id": "TTMcQ0Xc",
            "type": "T_MANUAL"
          },
          {
            "id": "TTGZqmKT",
            "type": "T_FORMULA",
            "params": {
              "formula": "$gv(wgtalign)$"
            }
          }
        ],
        "a": [
          {
            "id": "TAKkmw2V",
            "type": "A_FORMULA",
            "params": {
              "formula": "$lv(current, gv(position))$$lv(horver, (if(gv(wgtalign) = 0, \"hor\", \"ver\")))$$lv(inverted, (if(gv(wgtboxsw) = 0, \"no\", \"yes\")))$$lv(pos, (if(#horver = \"hor\" & #inverted = \"no\", \"RIGHT\", #horver = \"hor\" & #inverted = \"yes\", \"LEFT\", #horver = \"ver\" & #inverted = \"no\", \"TOP\", #horver = \"ver\" & #inverted = \"yes\", \"BOTTOM\")))$$if(gv(autoalig) = 0, #pos, current)$"
            }
          },
          {
            "id": "TAkUFwMK",
            "type": "A_GLOBAL",
            "params": {
              "global": "position"
            }
          }
        ]
      },
      {
        "id": "FNmCqvPE",
        "name": "Tasker - Send control data",
        "t": [
          {
            "id": "TTF5FNrP",
            "type": "T_FORMULA",
            "params": {
              "formula": "$gv(tasker/hactrl)$"
            }
          }
        ],
        "a": [
          {
            "id": "TAGxT3jY",
            "type": "A_FORMULA",
            "params": {
              "formula": "$lv(command, tc(split, gv(tasker/hactrl), \"&\", 0))$$lv(commandinfo, tc(split, gv(tasker/hactrl), \"&\", 1))$$lv(recomb, \"tasker://secondary?service=\" + #command + \"&json=\" + #commandinfo)$$#recomb$"
            }
          },
          {
            "id": "TA5q6BtU",
            "type": "A_INTENT_URI",
            "params": {
              "uri": "$#last$"
            }
          }
        ]
      }
    ],
    "config_scale_value": 80.0,
    "viewgroup_items": [
      {
        "internal_type": "OverlapLayerModule",
        "internal_title": "Main Icons",
        "position_anchor": "CENTERRIGHT",
        "internal_toggles": {
          "position_anchor": 10,
          "position_offset_x": 10,
          "position_offset_y": 10
        },
        "internal_formulas": {
          "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
          "position_offset_x": "$if(gv(wgtalign) = 0, gv(padside), 0 )$",
          "position_offset_y": "$if(gv(wgtalign) = 0, 0, gv(padupdwn))$"
        },
        "viewgroup_items": [
          {
            "internal_type": "ShapeModule",
            "internal_title": "Background",
            "internal_toggles": {
              "paint_color": 10,
              "shape_width": 100,
              "shape_height": 100,
              "position_anchor": 10,
              "position_padding_left": 0,
              "position_padding_right": 0,
              "position_padding_top": 0,
              "shape_corners": 100
            },
            "internal_formulas": {
              "paint_color": "$ce(gv(generate/col1),alpha,75)$",
              "position_anchor": "$if(gv(wgtalign) = 0, CENTERRIGHT, TOP)$",
              "position_padding_left": "$if(gv(wgtalign) = 0, gv(padside), 0 )$",
              "position_padding_right": "$if(gv(wgtalign) = 0, gv(padside), 0 )$",
              "position_padding_top": "$if(gv(wgtalign) = 0, 0, gv(padupdwn))$"
            },
            "shape_type": "RECT",
            "shape_width": 135.0,
            "shape_height": 212.0,
            "paint_color": "#FF00626D",
            "position_anchor": "CENTERRIGHT",
            "paint_mode": "OVERLAY",
            "shape_corners": 10.0,
            "internal_globals": {
              "shape_width": "generate/smboxw",
              "shape_height": "generate/smboxh",
              "shape_corners": "corrad"
            }
          },
          {
            "internal_type": "StackLayerModule",
            "config_margin": 15.0,
            "internal_title": "CHOOSE - 4 Device Controls",
            "internal_toggles": {
              "config_stacking": 10,
              "config_margin": 100,
              "config_visible": 10
            },
            "internal_formulas": {
              "config_stacking": "$if(gv(wgtalign) = 0, VERTICAL_LEFT, HORIZONTAL_CENTER)$",
              "config_visible": "$if(gv(wgtmode) = 0, \"ALWAYS\", \"NEVER\")$"
            },
            "internal_globals": {
              "config_margin": "icomarg"
            },
            "viewgroup_items": [
              {
                "internal_type": "StackLayerModule",
                "config_stacking": "HORIZONTAL_CENTER",
                "config_margin": 15,
                "internal_title": "EDIT > Room Selection Controls",
                "viewgroup_items": [
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "VERTICAL_CENTER",
                    "config_margin": 15,
                    "internal_title": "EDIT - Left Stack",
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 1",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-king-bed",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "intent": "intent:#Intent;action=net.dinglisch.android.tasker.WIDICKYUM;component=net.dinglisch.android.taskerm/.IntentHandler;S.mcro=%3CTask%20sr%3D%22%22%3E%3Cid%3E-23%3C%2Fid%3E%3CImg%20sr%3D%22icn%22ve%3D%222%22%3E%3Cnme%3Emw_places_ac_unit%3C%2Fnme%3E%3C%2FImg%3E%3Cnme%3EFan%20Speed%3C%2Fnme%3E%3Cpri%3E7%3C%2Fpri%3E%3Crty%3E2%3C%2Frty%3E%3CAction%20sr%3D%22act0%22ve%3D%227%22%3E%3CStr%20sr%3D%22arg0%22ve%3D%223%22%3EFan%20Speed%3C%2FStr%3E%3CInt%20sr%3D%22arg1%22val%3D%227%22%2F%3E%3CStr%20sr%3D%22arg2%22ve%3D%223%22%2F%3E%3CStr%20sr%3D%22arg3%22ve%3D%223%22%2F%3E%3CStr%20sr%3D%22arg4%22ve%3D%223%22%2F%3E%3CInt%20sr%3D%22arg5%22val%3D%221%22%2F%3E%3CInt%20sr%3D%22arg6%22%2F%3E%3CStr%20sr%3D%22arg7%22ve%3D%223%22%2F%3E%3CInt%20sr%3D%22arg8%22%2F%3E%3CInt%20sr%3D%22arg9%22%2F%3E%3Ccode%3E130%3C%2Fcode%3E%3CInt%20sr%3D%22arg10%22%2F%3E%3C%2FAction%3E%3Ccdate%3E1689742403321%3C%2Fcdate%3E%3Cedate%3E1689742403321%3C%2Fedate%3E%3C%2FTask%3E;S.AUTH_ID=6929c49f-b3c8-4930-95bc-d74afe8efb91;S.org.kustom.intent.label=Task%20Shortcut;end",
                                "switch": "generate/pagenum",
                                "switch_text": "$if(gv(generate/pagenum)!=0,0,0)$",
                                "switch_list": "0"
                              }
                            ],
                            "internal_title": "Rm Sel 1",
                            "icon_size": 90,
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 3",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-sofa-outline",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "intent": "intent:#Intent;action=net.dinglisch.android.tasker.WIDICKYUM;component=net.dinglisch.android.taskerm/.IntentHandler;S.mcro=%3CTask%20sr%3D%22%22%3E%3Cid%3E-24%3C%2Fid%3E%3CImg%20sr%3D%22icn%22ve%3D%222%22%3E%3Cnme%3Emw_places_ac_unit%3C%2Fnme%3E%3C%2FImg%3E%3Cnme%3EFan%20Oscillation%3C%2Fnme%3E%3Cpri%3E7%3C%2Fpri%3E%3Crty%3E2%3C%2Frty%3E%3CAction%20sr%3D%22act0%22ve%3D%227%22%3E%3CStr%20sr%3D%22arg0%22ve%3D%223%22%3EFan%20Oscillation%3C%2FStr%3E%3CInt%20sr%3D%22arg1%22val%3D%227%22%2F%3E%3CStr%20sr%3D%22arg2%22ve%3D%223%22%2F%3E%3CStr%20sr%3D%22arg3%22ve%3D%223%22%2F%3E%3CStr%20sr%3D%22arg4%22ve%3D%223%22%2F%3E%3CInt%20sr%3D%22arg5%22val%3D%221%22%2F%3E%3CInt%20sr%3D%22arg6%22%2F%3E%3CStr%20sr%3D%22arg7%22ve%3D%223%22%2F%3E%3CInt%20sr%3D%22arg8%22%2F%3E%3CInt%20sr%3D%22arg9%22%2F%3E%3Ccode%3E130%3C%2Fcode%3E%3CInt%20sr%3D%22arg10%22%2F%3E%3C%2FAction%3E%3Ccdate%3E1689742428453%3C%2Fcdate%3E%3Cedate%3E1689742428453%3C%2Fedate%3E%3C%2FTask%3E;S.AUTH_ID=962363af-4847-4ba0-9db9-c5c4fde3df87;S.org.kustom.intent.label=Task%20Shortcut;end",
                                "switch": "generate/pagenum",
                                "switch_text": "$if(gv(generate/pagenum)!=3,3,0)$",
                                "switch_list": "2"
                              }
                            ],
                            "internal_title": "Rm Sel 2",
                            "icon_size": 90,
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "VERTICAL_CENTER",
                    "config_margin": 15,
                    "internal_title": "EDIT - Right Stack",
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 2",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-desk",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_title": "Rm Sel 3",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "intent": "intent:#Intent;action=net.dinglisch.android.tasker.WIDICKYUM;component=net.dinglisch.android.taskerm/.IntentHandler;S.mcro=%3CTask%20sr%3D%22%22%3E%3Cid%3E-25%3C%2Fid%3E%3CImg%20sr%3D%22icn%22ve%3D%222%22%3E%3Cnme%3Emw_places_ac_unit%3C%2Fnme%3E%3C%2FImg%3E%3Cnme%3EFan%20Power%3C%2Fnme%3E%3Cpri%3E7%3C%2Fpri%3E%3Crty%3E2%3C%2Frty%3E%3CAction%20sr%3D%22act0%22ve%3D%227%22%3E%3CStr%20sr%3D%22arg0%22ve%3D%223%22%3EFan%20Power%3C%2FStr%3E%3CInt%20sr%3D%22arg1%22val%3D%227%22%2F%3E%3CStr%20sr%3D%22arg2%22ve%3D%223%22%2F%3E%3CStr%20sr%3D%22arg3%22ve%3D%223%22%2F%3E%3CStr%20sr%3D%22arg4%22ve%3D%223%22%2F%3E%3CInt%20sr%3D%22arg5%22val%3D%221%22%2F%3E%3CInt%20sr%3D%22arg6%22%2F%3E%3CStr%20sr%3D%22arg7%22ve%3D%223%22%2F%3E%3CInt%20sr%3D%22arg8%22%2F%3E%3CInt%20sr%3D%22arg9%22%2F%3E%3Ccode%3E130%3C%2Fcode%3E%3CInt%20sr%3D%22arg10%22%2F%3E%3C%2FAction%3E%3Ccdate%3E1689742452662%3C%2Fcdate%3E%3Cedate%3E1689742452662%3C%2Fedate%3E%3C%2FTask%3E;S.AUTH_ID=9fc6c1eb-fdb7-4aee-9649-94d30c90551b;S.org.kustom.intent.label=Task%20Shortcut;end",
                                "switch": "generate/pagenum",
                                "switch_text": "$if(gv(generate/pagenum)!=1,1,0)$",
                                "switch_list": "1"
                              }
                            ],
                            "icon_size": 90,
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 4",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-coat-rack",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_title": "Rm Sel 4",
                            "icon_size": 90,
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "generate/pagenum",
                                "switch_text": "$if(gv(generate/pagenum)!=2,2,0)$",
                                "switch_list": "3"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - 2 Device Controls",
            "viewgroup_items": [
              {
                "internal_type": "StackLayerModule",
                "config_margin": 15.0,
                "internal_title": "EDIT - 2 Device Controls",
                "internal_toggles": {
                  "config_stacking": 10,
                  "config_margin": 100,
                  "config_visible": 10
                },
                "internal_formulas": {
                  "config_stacking": "$if(gv(wgtalign) = 0, VERTICAL_LEFT, HORIZONTAL_CENTER)$",
                  "config_visible": "$if(gv(wgtmode) = 0, \"NEVER\", \"ALWAYS\")$"
                },
                "internal_globals": {
                  "config_margin": "icomarg"
                },
                "viewgroup_items": [
                  {
                    "internal_type": "FontIconModule",
                    "icon_icon": "material-fan",
                    "position_anchor": "TOPRIGHT",
                    "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                    "icon_size": 95.0,
                    "internal_title": "Fan Power",
                    "internal_events": [
                      {
                        "type": "SINGLE_TAP",
                        "action": "SWITCH_GLOBAL",
                        "switch": "tasker/hactrl",
                        "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_power\" }"
                      }
                    ],
                    "internal_toggles": {
                      "icon_icon": 0,
                      "icon_size": 10,
                      "paint_color": 100
                    },
                    "internal_formulas": {
                      "icon_icon": "",
                      "icon_size": "$gv(icomain)$"
                    },
                    "internal_globals": {
                      "paint_color": "colors/colico"
                    }
                  },
                  {
                    "internal_type": "FontIconModule",
                    "icon_icon": "material-air-conditioner",
                    "internal_title": "A/C Power",
                    "position_anchor": "BOTTOMRIGHT",
                    "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                    "internal_toggles": {
                      "icon_icon": 0,
                      "icon_size": 10,
                      "paint_color": 100
                    },
                    "internal_formulas": {
                      "icon_icon": "",
                      "icon_size": "$gv(icomain)$"
                    },
                    "internal_globals": {
                      "paint_color": "colors/colico"
                    },
                    "icon_size": 95.0,
                    "internal_events": [
                      {
                        "type": "SINGLE_TAP",
                        "action": "SWITCH_GLOBAL",
                        "switch": "tasker/hactrl",
                        "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_power\" }"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - 1 Device Control",
            "viewgroup_items": [
              {
                "internal_type": "StackLayerModule",
                "config_margin": 15.0,
                "internal_title": "*** Soundbar Controls 2 Icons",
                "internal_toggles": {
                  "config_stacking": 10,
                  "config_margin": 100,
                  "config_visible": 10
                },
                "internal_formulas": {
                  "config_stacking": "$if(gv(wgtalign) = 0, VERTICAL_LEFT, HORIZONTAL_CENTER)$",
                  "config_visible": "$if(gv(wgtmode) = 0, \"NEVER\", \"ALWAYS\")$"
                },
                "internal_globals": {
                  "config_margin": "icomarg"
                },
                "viewgroup_items": [
                  {
                    "internal_type": "FontIconModule",
                    "icon_icon": "material-fan",
                    "position_anchor": "TOPRIGHT",
                    "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                    "icon_size": 95.0,
                    "internal_title": "Fan Power",
                    "internal_events": [
                      {
                        "type": "SINGLE_TAP",
                        "action": "SWITCH_GLOBAL",
                        "switch": "tasker/hactrl",
                        "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_power\" }"
                      }
                    ],
                    "internal_toggles": {
                      "icon_icon": 0,
                      "icon_size": 10,
                      "paint_color": 100
                    },
                    "internal_formulas": {
                      "icon_icon": "",
                      "icon_size": "$gv(icomain)$"
                    },
                    "internal_globals": {
                      "paint_color": "colors/colico"
                    }
                  },
                  {
                    "internal_type": "FontIconModule",
                    "icon_icon": "material-air-conditioner",
                    "internal_title": "A/C Power",
                    "position_anchor": "BOTTOMRIGHT",
                    "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                    "internal_toggles": {
                      "icon_icon": 0,
                      "icon_size": 10,
                      "paint_color": 100
                    },
                    "internal_formulas": {
                      "icon_icon": "",
                      "icon_size": "$gv(icomain)$"
                    },
                    "internal_globals": {
                      "paint_color": "colors/colico"
                    },
                    "icon_size": 95.0,
                    "internal_events": [
                      {
                        "type": "SINGLE_TAP",
                        "action": "SWITCH_GLOBAL",
                        "switch": "tasker/hactrl",
                        "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_power\" }"
                      }
                    ]
                  }
                ]
              },
              {
                "internal_type": "StackLayerModule",
                "config_margin": 15.0,
                "internal_title": "*** Soundbar Controls 4 Icons",
                "internal_toggles": {
                  "config_stacking": 10,
                  "config_margin": 100,
                  "config_visible": 10
                },
                "internal_formulas": {
                  "config_stacking": "$if(gv(wgtalign) = 0, VERTICAL_LEFT, HORIZONTAL_CENTER)$",
                  "config_visible": "$if(gv(wgtmode) = 0, \"NEVER\", \"ALWAYS\")$"
                },
                "internal_globals": {
                  "config_margin": "icomarg"
                },
                "viewgroup_items": [
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "VERTICAL_CENTER",
                    "config_margin": 15,
                    "internal_title": "EDIT - Left Stack",
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 1",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-fan",
                            "position_anchor": "TOPRIGHT",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "icon_size": 95.0,
                            "internal_title": "Fan Power",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_power\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 10,
                              "paint_color": 100
                            },
                            "internal_formulas": {
                              "icon_icon": "",
                              "icon_size": "$gv(icomain)$"
                            },
                            "internal_globals": {
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 3",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-air-conditioner",
                            "internal_title": "A/C Power",
                            "position_anchor": "BOTTOMRIGHT",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 10,
                              "paint_color": 100
                            },
                            "internal_formulas": {
                              "icon_icon": "",
                              "icon_size": "$gv(icomain)$"
                            },
                            "internal_globals": {
                              "paint_color": "colors/colico"
                            },
                            "icon_size": 95.0,
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_power\" }"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "VERTICAL_CENTER",
                    "config_margin": 15,
                    "internal_title": "EDIT - Right Stack",
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 2",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-fan",
                            "position_anchor": "TOPRIGHT",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "icon_size": 95.0,
                            "internal_title": "Fan Power",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_power\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 10,
                              "paint_color": 100
                            },
                            "internal_formulas": {
                              "icon_icon": "",
                              "icon_size": "$gv(icomain)$"
                            },
                            "internal_globals": {
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Room Selection, Icon 4",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-air-conditioner",
                            "internal_title": "A/C Power",
                            "position_anchor": "BOTTOMRIGHT",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 10,
                              "paint_color": 100
                            },
                            "internal_formulas": {
                              "icon_icon": "",
                              "icon_size": "$gv(icomain)$"
                            },
                            "internal_globals": {
                              "paint_color": "colors/colico"
                            },
                            "icon_size": 95.0,
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_power\" }"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - Logo Or Icon",
            "viewgroup_items": []
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - Hidden",
            "viewgroup_items": []
          }
        ]
      },
      {
        "internal_type": "OverlapLayerModule",
        "internal_title": "Control Icons",
        "position_anchor": "CENTERLEFT",
        "internal_toggles": {
          "position_anchor": 10,
          "position_offset_y": 10,
          "position_offset_x": 10,
          "config_visible": 0
        },
        "internal_formulas": {
          "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
          "position_offset_y": "$if(gv(wgtalign) = 0, 0, (gv(generate/smboxh) + gv(padupdwn)))$",
          "position_offset_x": "$if(gv(wgtalign) = 0, (gv(generate/smboxw) + gv(padside)), 0)$",
          "config_visible": ""
        },
        "internal_globals": {
          "position_offset_x": "padside"
        },
        "viewgroup_items": [
          {
            "internal_type": "ShapeModule",
            "shape_type": "RECT",
            "shape_width": 545.0,
            "shape_height": 212.0,
            "paint_color": "#BB008F95",
            "internal_toggles": {
              "paint_color": 10,
              "shape_width": 100,
              "shape_height": 100,
              "position_anchor": 10,
              "position_padding_left": 0,
              "shape_corners": 100
            },
            "internal_title": "Background",
            "position_anchor": "CENTERLEFT",
            "internal_formulas": {
              "paint_color": "$ce(gv(generate/col2),alpha,75)$",
              "shape_width": "$if(gv(wgtalign) = 1, gv(generate/lgboxw), (gv(generate/lgboxw) - gv(generate/smboxw)))$",
              "shape_height": "$if(gv(wgtalign) = 0, (gv(generate/lgboxh) - gv(generate/smboxw)), (gv(generate/lgboxh) - gv(generate/smboxh)))$",
              "position_anchor": "$if(gv(wgtalign) = 0, CENTERLEFT, BOTTOM)$",
              "position_padding_left": "$if(gv(wgtalign) = 0, gv(padside), 0 )$"
            },
            "shape_corners": 10.0,
            "internal_globals": {
              "shape_width": "generate/lgboxw",
              "shape_height": "generate/lgboxh",
              "shape_corners": "corrad"
            }
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - 4 Devices Visible",
            "internal_toggles": {
              "position_anchor": 10,
              "position_padding_left": 10,
              "position_padding_right": 10,
              "position_padding_top": 10,
              "position_padding_bottom": 10,
              "config_visible": 10
            },
            "internal_formulas": {
              "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
              "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
              "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
              "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
              "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$",
              "config_visible": "$if(gv(wgtmode) = 0, \"ALWAYS\", \"NEVER\")$"
            },
            "viewgroup_items": [
              {
                "internal_type": "OverlapLayerModule",
                "internal_title": "Lighting",
                "viewgroup_items": [
                  {
                    "internal_type": "StackLayerModule",
                    "internal_title": "Rm 1",
                    "position_anchor": "CENTERLEFT",
                    "internal_toggles": {
                      "config_visible": 10,
                      "config_stacking": 10
                    },
                    "internal_formulas": {
                      "config_visible": "$if(gv(generate/pagenum)=0,\"ALWAYS\",\"NEVER\")$",
                      "config_stacking": "$if(gv(position) = RIGHT, VERTICAL_RIGHT, gv(position) = LEFT, VERTICAL_LEFT,  gv(position) = TOP, HORIZONTAL_TOP,  gv(position) = BOTTOM, HORIZONTAL_BOTTOM)$",
                      "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
                      "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
                      "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
                      "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
                      "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 1, Row 1",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 1, Row 1, Power",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "Material-power",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_title": "Rm 1 Power",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.toggle&{ \"entity_id\": \"light.bedroom_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                }
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 1, Row 1, HA",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-king-bed",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 1 HA",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "OPEN_LINK",
                                    "url": "homeassistant://navigate/dashboard-widgets/bedroom-lights?kiosk"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 1, Row 2",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 1, Row 2, OFF",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-off-outline",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_off { \"entity_id\": \"light.bedroom_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 1 OFF"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 1, Row 2, LOW",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on-30",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.bedroom_lights\", \"brightness\": 30 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 1 LOW"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 1, Row 2, MED",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on-60",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.bedroom_lights\", \"brightness\": 125 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 1 MED"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 1, Row 2, HI",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.bedroom_lights\", \"brightness\": 255 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 1 HIGH"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "internal_type": "StackLayerModule",
                    "internal_title": "Rm 2",
                    "config_stacking": "VERTICAL_RIGHT",
                    "position_anchor": "CENTERLEFT",
                    "internal_toggles": {
                      "config_visible": 10,
                      "config_stacking": 10,
                      "position_anchor": 10
                    },
                    "internal_formulas": {
                      "config_visible": "$if(gv(generate/pagenum)=1,\"ALWAYS\",\"NEVER\")$",
                      "config_stacking": "$if(gv(position) = RIGHT, VERTICAL_RIGHT, gv(position) = LEFT, VERTICAL_LEFT,  gv(position) = TOP, HORIZONTAL_TOP,  gv(position) = BOTTOM, HORIZONTAL_BOTTOM)$",
                      "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
                      "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
                      "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
                      "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
                      "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 2, Row 1",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 2, Row 1, Power",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "Material-power",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_title": "Rm 2 Power",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.toggle&{ \"entity_id\": \"light.study_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                }
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 2, Row 1, HA",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-desk",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 2 HA",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "OPEN_LINK",
                                    "url": "homeassistant://navigate/dashboard-widgets/bedroom-lights?kiosk"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 2, Row 2",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 2, Row 2, OFF",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-off-outline",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_off&{ \"entity_id\": \"light.study_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 2 OFF"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 2, Row 2, LOW",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on-30",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.study_lights\", \"brightness\": 30 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 2 LOW"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 2, Row 2, MED",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on-60",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.study_lights\", \"brightness\": 125 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 2 MED"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 2, Row 2, HI",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.study_lights\", \"brightness\": 255 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 2 HIGH"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "internal_type": "StackLayerModule",
                    "internal_title": "Rm 3",
                    "config_stacking": "VERTICAL_RIGHT",
                    "position_anchor": "CENTERLEFT",
                    "internal_toggles": {
                      "config_visible": 10,
                      "config_stacking": 10,
                      "position_anchor": 10
                    },
                    "internal_formulas": {
                      "config_visible": "$if(gv(generate/pagenum)=2,\"ALWAYS\",\"NEVER\")$",
                      "config_stacking": "$if(gv(position) = RIGHT, VERTICAL_RIGHT, gv(position) = LEFT, VERTICAL_LEFT,  gv(position) = TOP, HORIZONTAL_TOP,  gv(position) = BOTTOM, HORIZONTAL_BOTTOM)$",
                      "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
                      "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
                      "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
                      "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
                      "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 3, Row 1",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 3, Row 1, Power",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "Material-power",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_title": "Rm 3 Power",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "switch.toggle&{ \"entity_id\": \"switch.lr_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                }
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 3, Row 1, HA",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-sofa-outline",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 3 HA",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "OPEN_LINK",
                                    "url": "homeassistant://navigate/dashboard-widgets/bedroom-lights?kiosk"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 3, Row 2",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 3, Row 2, OFF",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-off-outline",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "switch.turn_off&{ \"entity_id\": \"switch.lr_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 3 OFF"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 3, Row 2, HI",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "switch.turn_on&{ \"entity_id\": \"switch.lr_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 3 HIGH"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "internal_type": "StackLayerModule",
                    "internal_title": "Rm 4",
                    "config_stacking": "VERTICAL_RIGHT",
                    "position_anchor": "CENTERLEFT",
                    "internal_toggles": {
                      "config_visible": 10,
                      "config_stacking": 10,
                      "position_anchor": 10
                    },
                    "internal_formulas": {
                      "config_visible": "$if(gv(generate/pagenum)=3,\"ALWAYS\",\"NEVER\")$",
                      "config_stacking": "$if(gv(position) = RIGHT, VERTICAL_RIGHT, gv(position) = LEFT, VERTICAL_LEFT,  gv(position) = TOP, HORIZONTAL_TOP,  gv(position) = BOTTOM, HORIZONTAL_BOTTOM)$",
                      "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
                      "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
                      "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
                      "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
                      "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 4, Row 1",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 4, Row 1, Power",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "Material-power",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_title": "Rm 4 Power",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.toggle&{ \"entity_id\": \"light.foyer_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                }
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 4, Row 1, HA",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "coat-rack",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 4 HA",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "OPEN_LINK",
                                    "url": "homeassistant://navigate/dashboard-widgets/foyer-lights?kiosk"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "StackLayerModule",
                        "config_stacking": "HORIZONTAL_CENTER",
                        "internal_title": "Rm 4, Row 2",
                        "config_margin": 15,
                        "internal_toggles": {
                          "config_stacking": 10,
                          "config_margin": 100
                        },
                        "internal_formulas": {
                          "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                        },
                        "internal_globals": {
                          "config_margin": "icopad"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 4, Row 2, OFF",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-off-outline",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_off&{ \"entity_id\": \"light.foyer_lights\" }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 4 OFF"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 4, Row 2, LOW",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on-30",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.foyer_lights\", \"brightness\": 30 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 4 LOW"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 4, Row 2, MED",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on-60",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.foyer_lights\", \"brightness\": 125 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 4 MED"
                              }
                            ]
                          },
                          {
                            "internal_type": "OverlapLayerModule",
                            "internal_title": "Rm 4, Row 2, HI",
                            "viewgroup_items": [
                              {
                                "internal_type": "FontIconModule",
                                "icon_icon": "material-lightbulb-on",
                                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                                "internal_events": [
                                  {
                                    "type": "SINGLE_TAP",
                                    "action": "SWITCH_GLOBAL",
                                    "switch": "tasker/hactrl",
                                    "switch_text": "light.turn_on&{ \"entity_id\": \"light.foyer_lights\", \"brightness\": 255 }"
                                  }
                                ],
                                "internal_toggles": {
                                  "icon_size": 100,
                                  "paint_color": 100
                                },
                                "internal_globals": {
                                  "icon_size": "icomain",
                                  "paint_color": "colors/colico"
                                },
                                "internal_title": "Rm 4 HIGH"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - 2 Devices Visible",
            "internal_toggles": {
              "position_anchor": 10,
              "position_padding_left": 10,
              "position_padding_right": 10,
              "position_padding_top": 10,
              "position_padding_bottom": 10,
              "config_visible": 10
            },
            "internal_formulas": {
              "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
              "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
              "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
              "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
              "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$",
              "config_visible": "$if(gv(wgtmode) = 0, \"NEVER\", \"ALWAYS\")$"
            },
            "viewgroup_items": [
              {
                "internal_type": "StackLayerModule",
                "internal_title": "Device Control Icons",
                "config_margin": 15.0,
                "config_stacking": "VERTICAL_RIGHT",
                "position_offset_x": 35.0,
                "internal_toggles": {
                  "config_stacking": 10,
                  "position_anchor": 0,
                  "position_padding_right": 0,
                  "position_padding_top": 0,
                  "position_padding_left": 0,
                  "position_padding_bottom": 0,
                  "config_margin": 100,
                  "config_visible": 10
                },
                "internal_formulas": {
                  "config_stacking": "$if(gv(position) = RIGHT, VERTICAL_RIGHT, gv(position) = LEFT, VERTICAL_LEFT,  gv(position) = TOP, HORIZONTAL_TOP,  gv(position) = BOTTOM, HORIZONTAL_BOTTOM)$",
                  "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
                  "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
                  "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
                  "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
                  "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$",
                  "config_visible": "$if(gv(wgtmode) = 0, \"NEVER\", \"ALWAYS\")$"
                },
                "internal_globals": {
                  "config_margin": "icomarg"
                },
                "viewgroup_items": [
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "HORIZONTAL_CENTER",
                    "config_margin": 20.0,
                    "internal_title": "MATCH - Fan",
                    "internal_toggles": {
                      "config_stacking": 10,
                      "config_margin": 100
                    },
                    "internal_formulas": {
                      "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                    },
                    "internal_globals": {
                      "config_margin": "icopad"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 1",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Speed",
                            "icon_icon": "custom-fan-speed",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_speedtoggle\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 2",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Oscillation",
                            "icon_icon": "custom-fan-oscillation",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_oscillation\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 3",
                        "config_visible": "REMOVE",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Speed",
                            "icon_icon": "custom-fan-speed",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_speedtoggle\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 4",
                        "config_visible": "REMOVE",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Oscillation",
                            "icon_icon": "custom-fan-oscillation",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_oscillation\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "HORIZONTAL_CENTER",
                    "config_margin": 25.0,
                    "internal_title": "MATCH - A/C",
                    "internal_toggles": {
                      "config_stacking": 10,
                      "config_margin": 100
                    },
                    "internal_formulas": {
                      "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                    },
                    "internal_globals": {
                      "config_margin": "icopad"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 1",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "custom-fan-speed",
                            "internal_title": "A/C Speed",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_fan_speed\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 2",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-snowflake",
                            "internal_title": "A/C Mode",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_mode\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 3",
                        "internal_toggles": {
                          "config_visible": 10
                        },
                        "internal_formulas": {
                          "config_visible": "$if(gv(generate/icocount)  < 3, REMOVE, ALWAYS)$"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-thermometer-minus",
                            "internal_title": "A/C Down",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_temp_down\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 4",
                        "internal_toggles": {
                          "config_visible": 10
                        },
                        "internal_formulas": {
                          "config_visible": "$if(gv(generate/icocount)  < 4, REMOVE, ALWAYS)$"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-thermometer-plus",
                            "internal_title": "A/C Up",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_temp_up\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 5",
                        "internal_toggles": {
                          "config_visible": 10
                        },
                        "internal_formulas": {
                          "config_visible": "$if(gv(generate/icocount)  < 5, REMOVE, ALWAYS)$"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-thermometer-plus",
                            "internal_title": "A/C Up",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_temp_up\" }"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - 1 Device Control",
            "viewgroup_items": [
              {
                "internal_type": "StackLayerModule",
                "internal_title": "*** Soundbar Controls",
                "config_margin": 15.0,
                "config_stacking": "VERTICAL_RIGHT",
                "position_offset_x": 35.0,
                "internal_toggles": {
                  "config_stacking": 10,
                  "position_anchor": 0,
                  "position_padding_right": 0,
                  "position_padding_top": 0,
                  "position_padding_left": 0,
                  "position_padding_bottom": 0,
                  "config_margin": 100,
                  "config_visible": 10
                },
                "internal_formulas": {
                  "config_stacking": "$if(gv(position) = RIGHT, VERTICAL_RIGHT, gv(position) = LEFT, VERTICAL_LEFT,  gv(position) = TOP, HORIZONTAL_TOP,  gv(position) = BOTTOM, HORIZONTAL_BOTTOM)$",
                  "position_anchor": "$if(gv(position) = RIGHT, CENTERRIGHT, gv(position) = LEFT, CENTERLEFT,  gv(position) = TOP, TOP,  gv(position) = BOTTOM, BOTTOM)$",
                  "position_padding_right": "$if(gv(position) = RIGHT, gv(icomarg), 0)$",
                  "position_padding_top": "$if(gv(position) = TOP, gv(icomarg), 0)$",
                  "position_padding_left": "$if(gv(position) = LEFT, gv(icomarg), 0)$",
                  "position_padding_bottom": "$if(gv(position) = BOTTOM, gv(icomarg), 0)$",
                  "config_visible": "$if(gv(wgtmode) = 0, \"NEVER\", \"ALWAYS\")$"
                },
                "internal_globals": {
                  "config_margin": "icomarg"
                },
                "viewgroup_items": [
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "HORIZONTAL_CENTER",
                    "config_margin": 20.0,
                    "internal_title": "MATCH - Fan",
                    "internal_toggles": {
                      "config_stacking": 10,
                      "config_margin": 100
                    },
                    "internal_formulas": {
                      "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                    },
                    "internal_globals": {
                      "config_margin": "icopad"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 1",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Speed",
                            "icon_icon": "custom-fan-speed",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_speedtoggle\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 2",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Oscillation",
                            "icon_icon": "custom-fan-oscillation",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_oscillation\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 3",
                        "config_visible": "REMOVE",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Speed",
                            "icon_icon": "custom-fan-speed",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_speedtoggle\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "Fan, Icon 4",
                        "config_visible": "REMOVE",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "internal_title": "Fan Oscillation",
                            "icon_icon": "custom-fan-oscillation",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_fan_oscillation\" }"
                              }
                            ],
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "internal_type": "StackLayerModule",
                    "config_stacking": "HORIZONTAL_CENTER",
                    "config_margin": 25.0,
                    "internal_title": "MATCH - A/C",
                    "internal_toggles": {
                      "config_stacking": 10,
                      "config_margin": 100
                    },
                    "internal_formulas": {
                      "config_stacking": "$if(gv(wgtalign) = 0, HORIZONTAL_CENTER, VERTICAL_CENTER )$"
                    },
                    "internal_globals": {
                      "config_margin": "icopad"
                    },
                    "viewgroup_items": [
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 1",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "custom-fan-speed",
                            "internal_title": "A/C Speed",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_fan_speed\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 2",
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-snowflake",
                            "internal_title": "A/C Mode",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_mode\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 3",
                        "internal_toggles": {
                          "config_visible": 10
                        },
                        "internal_formulas": {
                          "config_visible": "$if(gv(generate/icocount)  < 3, REMOVE, ALWAYS)$"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-thermometer-minus",
                            "internal_title": "A/C Down",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_temp_down\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 4",
                        "internal_toggles": {
                          "config_visible": 10
                        },
                        "internal_formulas": {
                          "config_visible": "$if(gv(generate/icocount)  < 4, REMOVE, ALWAYS)$"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-thermometer-plus",
                            "internal_title": "A/C Up",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_temp_up\" }"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "internal_type": "OverlapLayerModule",
                        "internal_title": "A/C, Icon 5",
                        "internal_toggles": {
                          "config_visible": 10
                        },
                        "internal_formulas": {
                          "config_visible": "$if(gv(generate/icocount)  < 5, REMOVE, ALWAYS)$"
                        },
                        "viewgroup_items": [
                          {
                            "internal_type": "FontIconModule",
                            "icon_icon": "material-thermometer-plus",
                            "internal_title": "A/C Up",
                            "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                            "internal_toggles": {
                              "icon_icon": 0,
                              "icon_size": 100,
                              "paint_color": 100
                            },
                            "internal_globals": {
                              "icon_size": "icomain",
                              "paint_color": "colors/colico"
                            },
                            "internal_events": [
                              {
                                "type": "SINGLE_TAP",
                                "action": "SWITCH_GLOBAL",
                                "switch": "tasker/hactrl",
                                "switch_text": "homeassistant.turn_on&{ \"entity_id\": \"script.ir_ac_temp_up\" }"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - Logo Or Icon",
            "viewgroup_items": []
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "CHOOSE - Hidden",
            "viewgroup_items": []
          }
        ]
      },
      {
        "internal_type": "OverlapLayerModule",
        "internal_title": "Device Logo",
        "internal_toggles": {
          "position_anchor": 10,
          "position_offset_x": 100,
          "position_offset_y": 100,
          "config_scale_value": 0,
          "config_visible": 10
        },
        "internal_formulas": {
          "position_anchor": "$if(gv(position) = RIGHT, TOPLEFT, gv(position) = LEFT, TOPRIGHT,  gv(position) = TOP, BOTTOMLEFT,  gv(position) = BOTTOM, TOPLEFT)$",
          "config_scale_value": "",
          "config_visible": "$if(gv(icohide) = 0, ALWAYS, REMOVE)$"
        },
        "internal_globals": {
          "position_offset_x": "padside",
          "position_offset_y": "padupdwn"
        },
        "viewgroup_items": [
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "Fan Icon",
            "internal_toggles": {
              "config_visible": 10
            },
            "internal_formulas": {
              "config_visible": "$if(gv(wgtmode) = 0, \"NEVER\", \"ALWAYS\")$"
            },
            "viewgroup_items": [
              {
                "internal_type": "FontIconModule",
                "internal_toggles": {
                  "paint_color": 10,
                  "position_offset_y": 100,
                  "position_offset_x": 100,
                  "position_anchor": 0,
                  "icon_rotate_mode": 10,
                  "icon_size": 100
                },
                "internal_formulas": {
                  "paint_color": "$ce(gv(colors/colico),alpha,20)$",
                  "position_anchor": "",
                  "icon_rotate_mode": "$if(gv(position) = RIGHT, NONE, gv(position) = LEFT, DEG90,  gv(position) = TOP, DEG270,  gv(position) = BOTTOM, NONE)$",
                  "icon_size": ""
                },
                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                "icon_icon": "custom-fan-outline",
                "icon_size": 120.0,
                "position_offset_x": 15.0,
                "internal_title": "Fan Icon",
                "internal_events": [
                  {
                    "type": "SINGLE_TAP",
                    "action": "KUSTOM_ACTION"
                  }
                ],
                "internal_globals": {
                  "position_offset_y": "padupdwn",
                  "position_offset_x": "padside",
                  "icon_size": "generate/icodevge"
                },
                "icon_rotate_mode": "DEG270"
              }
            ]
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "Light Icon",
            "internal_toggles": {
              "config_visible": 10
            },
            "internal_formulas": {
              "config_visible": "$if(gv(wgtmode) = 0, \"ALWAYS\", \"NEVER\")$"
            },
            "viewgroup_items": [
              {
                "internal_type": "FontIconModule",
                "internal_toggles": {
                  "paint_color": 10,
                  "position_offset_y": 100,
                  "position_offset_x": 100,
                  "position_anchor": 0,
                  "icon_rotate_mode": 10,
                  "icon_size": 100
                },
                "internal_formulas": {
                  "paint_color": "$ce(gv(colors/colico),alpha,20)$",
                  "position_anchor": "",
                  "icon_rotate_mode": "$if(gv(position) = RIGHT, NONE, gv(position) = LEFT, NONE,  gv(position) = TOP, DEG270,  gv(position) = BOTTOM, NONE)$",
                  "icon_size": ""
                },
                "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
                "icon_icon": "material-wb-incandescent",
                "icon_size": 120.0,
                "position_offset_x": 15.0,
                "internal_title": "Light Icon",
                "internal_events": [
                  {
                    "type": "SINGLE_TAP",
                    "action": "KUSTOM_ACTION"
                  }
                ],
                "internal_globals": {
                  "position_offset_y": "padupdwn",
                  "position_offset_x": "padside",
                  "icon_size": "generate/icodevge"
                },
                "icon_rotate_mode": "DEG270"
              }
            ]
          }
        ]
      },
      {
        "internal_type": "FontIconModule",
        "icon_icon": "material-home-assistant",
        "internal_title": "App 1",
        "icon_size": 32.0,
        "position_anchor": "BOTTOMLEFT",
        "internal_events": [
          {
            "type": "SINGLE_TAP",
            "action": "LAUNCH_APP",
            "kustom_action": "ADVANCED_EDITOR",
            "intent": "intent:#Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;component=io.homeassistant.companion.android/.launch.LaunchActivity;S.org.kustom.intent.label=Home%20Assistant;end"
          }
        ],
        "position_offset_x": 22.0,
        "internal_toggles": {
          "paint_color": 10,
          "position_anchor": 10,
          "position_offset_x": 10,
          "icon_size": 100,
          "position_offset_y": 10
        },
        "internal_formulas": {
          "paint_color": "$if(gv(icohide) = 0, ce(gv(colors/colico),alpha,20), #00FFFFFF)$",
          "position_anchor": "$if(gv(position) = RIGHT, BOTTOMLEFT, gv(position) = LEFT, BOTTOMRIGHT,  gv(position) = TOP, BOTTOMRIGHT,  gv(position) = BOTTOM, TOPRIGHT)$",
          "position_offset_x": "$gv(padside) + gv(icomarg)$",
          "position_offset_y": "$gv(padupdwn) + gv(icomarg)$"
        },
        "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
        "internal_globals": {
          "position_offset_x": "padside",
          "icon_size": "icosm"
        }
      },
      {
        "internal_type": "FontIconModule",
        "icon_icon": "custom-material-charging",
        "internal_title": "App 2",
        "icon_size": 32.0,
        "position_anchor": "BOTTOMLEFT",
        "internal_events": [
          {
            "type": "SINGLE_TAP",
            "action": "SWITCH_GLOBAL",
            "kustom_action": "ADVANCED_EDITOR",
            "intent": "intent:#Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;component=io.homeassistant.companion.android/.launch.LaunchActivity;S.org.kustom.intent.label=Home%20Assistant;end",
            "switch": "setupmde"
          }
        ],
        "position_offset_x": 62.0,
        "internal_toggles": {
          "paint_color": 10,
          "position_anchor": 10,
          "position_offset_x": 10,
          "icon_size": 100,
          "position_offset_y": 10
        },
        "internal_formulas": {
          "paint_color": "$if(gv(icohide) = 0, ce(gv(colors/colico),alpha,20), #00FFFFFF)$",
          "position_anchor": "$if(gv(position) = RIGHT, BOTTOMLEFT, gv(position) = LEFT, BOTTOMRIGHT,  gv(position) = TOP, BOTTOMRIGHT,  gv(position) = BOTTOM, TOPRIGHT)$",
          "position_offset_x": "$gv(padside) +(gv(icomarg) * 2) +  gv(icosm)$",
          "position_offset_y": "$gv(padupdwn) + gv(icomarg)$"
        },
        "icon_set": "kfile://org.kustom.provider/icons/myicons4.ttf",
        "internal_globals": {
          "position_offset_x": "padside",
          "icon_size": "icosm"
        }
      },
      {
        "internal_type": "ShapeModule",
        "internal_title": "Backup Settings Button",
        "internal_toggles": {
          "position_anchor": 10
        },
        "internal_formulas": {
          "position_anchor": "$if(gv(position) = RIGHT, TOPLEFT, gv(position) = LEFT, TOPRIGHT,  gv(position) = TOP, BOTTOMLEFT,  gv(position) = BOTTOM, TOPLEFT)$"
        },
        "shape_width": 30.0,
        "paint_color": "#00FFFFFF",
        "position_anchor": "TOPRIGHT",
        "internal_events": [
          {
            "type": "SINGLE_TAP",
            "action": "KUSTOM_ACTION",
            "kustom_action": "ADVANCED_EDITOR"
          }
        ]
      },
      {
        "internal_type": "StackLayerModule",
        "internal_title": "SETUP DATA - DO NOT DELETE",
        "internal_toggles": {
          "config_visible": 10
        },
        "internal_formulas": {
          "config_visible": "$if(gv(setupmde)= 0 ,\"NEVER\", \"ALWAYS\")$"
        },
        "config_stacking": "VERTICAL_CENTER",
        "viewgroup_items": [
          {
            "internal_type": "TextModule",
            "text_expression": "[bl=-10]Widget: $si(rwidth)$W, $si(rheight)$H, $si(rratio)$ 1:1\nBox Area: $tc(reg, gv(generate/lgboxmin), \"\\n\", \"\")$ Min, $gv(generate/lgboxw)$W/$gv(generate/lgboxh)$H\n\nWidget Padding: $gv(padside)$ Side, $gv(padupdwn)$ Top\nIcon: $gv(icomain)$kpx, $tc(reg, gv(generate/icocount), \"\\n\", \"\")$ Vis\nIcon Padding:$gv(icomarg)$ Edge, $gv(icopad)$ MID\n\n$lv(icon, gv(icomain) + gv(icopad))$$lv(lgbox, if(gv(wgtalign) = 0, gv(generate/lgboxw), gv(generate/lgboxh)))$$lv(adjustment, if(gv(icopadr) = 0, gv(icosm), 0))$$lv(boxsize, #lgbox - #adjustment)$Icon to size ratio: $mu(abs, #boxsize /#icon)$[/bl]",
            "internal_title": "Widget Icon Padding",
            "text_align": "CENTER",
            "text_family": "kfile://org.kustom.provider/fonts/RobotoCondensed-Bold.ttf",
            "text_filter": [
              "UP"
            ],
            "paint_color": "#FF000000",
            "paint_stroke": 2.0
          },
          {
            "internal_type": "OverlapLayerModule",
            "internal_title": "Color Setup & Debugging",
            "config_visible": "REMOVE",
            "viewgroup_items": [
              {
                "internal_type": "TextModule",
                "text_expression": "$lv(source, (if(gv(colors/col1sel) = 0, \"wpcolor1\", gv(colors/col1sel) = 1, \"wpcolor2\", gv(colors/col1sel) = 2, \"sys\", \"0\")))$source: $#source$\n$lv(filter, (if(gv(colors/col1fil1) = 1, \"sat\", gv(colors/col1fil1) = 2, \"lum\", gv(colors/col1fil1) = 3, \"comp\", \"sat\")))$filter: $#filter$\n$lv(coltone, (if(gv(colors/col1sysc) = 0, \"sysca1\", gv(colors/col1sysc) = 1, \"sysca2\", gv(colors/col1sysc) = 2, \"sysca3\", gv(colors/col1sysc) = 3, \"syscn1\", gv(colors/col1sysc) = 4, \"syscn2\", gv(colors/col1sysc) = 5, \"syscn3\", \"sysca1\")))$color tone: $#coltone$\n$lv(addsub, (if(gv(colors/col1fil2) = 0, \"\", gv(colors/col1fil2) = 1, \"a\", gv(colors/col1fil2) = 2, \"r\", \"\")))$ addsub: $#addsub$\n\n$si(#source)$\n$if(gv(colors/col1fil1) > 0 & (#source = \"wpcolor1\" | #source = \"wpcolor2\"), lv(col1, ce(si(#source), #filter, gv(colors/col1adj))))$wpcolor: $#col1$\n$ce(\"#FF000101\", sat, 45)$\n$if(gv(colors/col1fil1) > 0 & #source = \"sys\", lv(col2, si(#coltone, gv(colors/col1adj))))$sysui: $#col2$\n$if(gv(colors/col1fil1) = 0 | gv(colors/col1sel) = 3, lv(col3, gv(colors/col1pick)))$colpick: $#col3$\n\n$lv(color, (if(gv(colors/col1sel) <= 1, #col1, gv(colors/col1sel) = 2, #col2, gv(colors/col1sel) = 3, #col3)))$$#color$\n$lv(final, ce(#color, alpha, gv(colors/col1alph)))$\nFinal color: $#final$"
              }
            ]
          }
        ]
      }
    ]
  }
}